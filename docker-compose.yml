version: '3.8'

services:
  app:
    build: .
    ports:
      - "80:80"
    volumes:
      - .:/app
    depends_on:
      - database
    networks:
      - blog-php-network
  database:
    restart: unless-stopped
    build:
      context: ./sql
    volumes:
      - mysql_8.2.0:/var/lib/mysql
    networks:
      - blog-php-network
    ports:
        - '3306:3306'
        - '33060:33060'
  phpmyadmin:
    depends_on:
      - database
    container_name: phpmyadmin-mysql-mysql_8.2.0
    image: phpmyadmin:5.2.1-apache
    restart: unless-stopped
    ports:
      - '3308:80'
    environment:
      - PMA_HOST=database
    networks:
      - blog-php-network

volumes:
  mysql_8.2.0:
  
networks:
  blog-php-network:
  
  
  
  